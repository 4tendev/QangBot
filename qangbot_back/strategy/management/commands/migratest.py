import json
from django.core.management.base import BaseCommand
from strategy.models import Strategy, asstUSDRate, History
from datetime import datetime, timedelta

oldDate = [{"date": "9 Jan", "USD-ROI": 1.0, "BTC-ROI": 1.0}, {"date": "10 Jan", "USD-ROI": 1.0, "BTC-ROI": 1.0}, {"date": "11 Jan", "USD-ROI": 1.0, "BTC-ROI": 1.0}, {"date": "12 Jan", "USD-ROI": 0.96, "BTC-ROI": 1.0}, {"date": "13 Jan", "USD-ROI": 0.93, "BTC-ROI": 1.01}, {"date": "14 Jan", "USD-ROI": 0.92, "BTC-ROI": 1.01}, {"date": "15 Jan", "USD-ROI": 0.93, "BTC-ROI": 1.01}, {"date": "16 Jan", "USD-ROI": 0.94, "BTC-ROI": 1.01}, {"date": "17 Jan", "USD-ROI": 0.93, "BTC-ROI": 1.01}, {"date": "18 Jan", "USD-ROI": 0.91, "BTC-ROI": 1.01}, {"date": "19 Jan", "USD-ROI": 0.91, "BTC-ROI": 1.01}, {"date": "20 Jan", "USD-ROI": 0.91, "BTC-ROI": 1.01}, {"date": "21 Jan", "USD-ROI": 0.91, "BTC-ROI": 1.01}, {"date": "22 Jan", "USD-ROI": 0.88, "BTC-ROI": 1.02}, {"date": "23 Jan", "USD-ROI": 0.88, "BTC-ROI": 1.02}, {"date": "24 Jan", "USD-ROI": 0.89, "BTC-ROI": 1.02}, {"date": "25 Jan", "USD-ROI": 0.88, "BTC-ROI": 1.02}, {"date": "26 Jan", "USD-ROI": 0.92, "BTC-ROI": 1.02}, {"date": "27 Jan", "USD-ROI": 0.93, "BTC-ROI": 1.02}, {"date": "28 Jan", "USD-ROI": 0.93, "BTC-ROI": 1.02}, {"date": "29 Jan", "USD-ROI": 0.95, "BTC-ROI": 1.01}, {"date": "30 Jan", "USD-ROI": 0.95, "BTC-ROI": 1.01}, {"date": "31 Jan", "USD-ROI": 0.94, "BTC-ROI": 1.02}, {"date": "1 Feb", "USD-ROI": 0.95, "BTC-ROI": 1.02}, {"date": "2 Feb", "USD-ROI": 0.95, "BTC-ROI": 1.02}, {"date": "3 Feb", "USD-ROI": 0.95, "BTC-ROI": 1.02}, {"date": "4 Feb", "USD-ROI": 0.94, "BTC-ROI": 1.02}, {"date": "5 Feb", "USD-ROI": 0.94, "BTC-ROI": 1.02}, {"date": "6 Feb", "USD-ROI": 0.95, "BTC-ROI": 1.02}, {"date": "7 Feb", "USD-ROI": 0.97, "BTC-ROI": 1.01}, {"date": "8 Feb", "USD-ROI": 0.99, "BTC-ROI": 1.01}, {"date": "9 Feb", "USD-ROI": 1.03, "BTC-ROI": 1.0}, {"date": "10 Feb", "USD-ROI": 1.04, "BTC-ROI": 1.0}, {"date": "11 Feb", "USD-ROI": 1.06, "BTC-ROI": 1.0}, {"date": "12 Feb", "USD-ROI": 1.09, "BTC-ROI": 0.99}, {"date": "13 Feb", "USD-ROI": 1.09, "BTC-ROI": 0.99}, {"date": "14 Feb", "USD-ROI": 1.12, "BTC-ROI": 0.99}, {"date": "15 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "16 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "17 Feb", "USD-ROI": 1.12, "BTC-ROI": 0.99}, {"date": "18 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "19 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "20 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "21 Feb", "USD-ROI": 1.12, "BTC-ROI": 0.99}, {"date": "22 Feb", "USD-ROI": 1.12, "BTC-ROI": 0.99}, {"date": "23 Feb", "USD-ROI": 1.11, "BTC-ROI": 0.99}, {"date": "24 Feb", "USD-ROI": 1.12, "BTC-ROI": 0.99}, {"date": "25 Feb", "USD-ROI": 1.13, "BTC-ROI": 0.99}, {"date": "26 Feb", "USD-ROI": 1.18, "BTC-ROI": 0.98}, {"date": "27 Feb", "USD-ROI": 1.22, "BTC-ROI": 0.97}, {"date": "28 Feb", "USD-ROI": 1.3, "BTC-ROI": 0.94}, {"date": "29 Feb", "USD-ROI": 1.29, "BTC-ROI": 0.95}, {"date": "1 Mar", "USD-ROI": 1.3, "BTC-ROI": 0.95}, {"date": "2 Mar", "USD-ROI": 1.3, "BTC-ROI": 0.95}, {"date": "3 Mar", "USD-ROI": 1.31, "BTC-ROI": 0.95}, {"date": "4 Mar", "USD-ROI": 1.37, "BTC-ROI": 0.92}, {"date": "5 Mar", "USD-ROI": 1.35, "BTC-ROI": 0.95}, {"date": "6 Mar", "USD-ROI": 1.37, "BTC-ROI": 0.94}, {"date": "7 Mar", "USD-ROI": 1.39, "BTC-ROI": 0.94}, {"date": "8 Mar", "USD-ROI": 1.4, "BTC-ROI": 0.93}, {"date": "9 Mar", "USD-ROI": 1.4, "BTC-ROI": 0.93}, {"date": "10 Mar", "USD-ROI": 1.41, "BTC-ROI": 0.93}, {"date": "11 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.91}, {"date": "12 Mar", "USD-ROI": 1.44, "BTC-ROI": 0.92}, {"date": "13 Mar", "USD-ROI": 1.46, "BTC-ROI": 0.91}, {"date": "14 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.92}, {"date": "15 Mar", "USD-ROI": 1.43, "BTC-ROI": 0.93}, {"date": "16 Mar", "USD-ROI": 1.38, "BTC-ROI": 0.96}, {"date": "17 Mar", "USD-ROI": 1.41, "BTC-ROI": 0.94}, {"date": "18 Mar", "USD-ROI": 1.41, "BTC-ROI": 0.95}, {"date": "19 Mar","USD-ROI": 1.34, "BTC-ROI": 0.98}, {"date": "20 Mar", "USD-ROI": 1.42, "BTC-ROI": 0.95}, {"date": "21 Mar", "USD-ROI": 1.39, "BTC-ROI": 0.97}, {"date": "22 Mar", "USD-ROI": 1.36, "BTC-ROI": 0.98}, {"date": "23 Mar", "USD-ROI": 1.38, "BTC-ROI": 0.97}, {"date": "24 Mar", "USD-ROI": 1.42, "BTC-ROI": 0.96}, {"date": "25 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.94}, {"date": "26 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.94}, {"date": "27 Mar", "USD-ROI": 1.44, "BTC-ROI": 0.95}, {"date": "28 Mar", "USD-ROI": 1.46, "BTC-ROI": 0.94}, {"date": "29 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.94}, {"date": "30 Mar", "USD-ROI": 1.45, "BTC-ROI": 0.95}, {"date": "31 Mar", "USD-ROI": 1.47, "BTC-ROI": 0.94}, {"date": "1 Apr", "USD-ROI": 1.45, "BTC-ROI": 0.95}, {"date": "2 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.97}, {"date": "3 Apr", "USD-ROI": 1.41, "BTC-ROI": 0.97}, {"date": "4 Apr", "USD-ROI": 1.44, "BTC-ROI": 0.96}, {"date": "5 Apr", "USD-ROI": 1.43, "BTC-ROI": 0.96}, {"date": "6 Apr", "USD-ROI": 1.45, "BTC-ROI": 0.95}, {"date": "7 Apr", "USD-ROI": 1.45, "BTC-ROI": 0.95}, {"date": "8 Apr", "USD-ROI": 1.48, "BTC-ROI": 0.94}, {"date": "9 Apr", "USD-ROI": 1.45, "BTC-ROI": 0.95}, {"date": "10 Apr", "USD-ROI": 1.47, "BTC-ROI": 0.95}, {"date": "11 Apr", "USD-ROI": 1.46, "BTC-ROI": 0.95}, {"date": "12 Apr", "USD-ROI": 1.42, "BTC-ROI": 0.96}, {"date": "13 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.99}, {"date": "14 Apr", "USD-ROI": 1.42, "BTC-ROI": 0.98}, {"date": "15 Apr", "USD-ROI": 1.39, "BTC-ROI": 0.99}, {"date": "16 Apr", "USD-ROI": 1.39, "BTC-ROI": 0.99}, {"date": "17 Apr", "USD-ROI": 1.36, "BTC-ROI": 1.0}, {"date": "18 Apr", "USD-ROI": 1.39, "BTC-ROI": 0.99}, {"date": "19 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.99}, {"date": "20 Apr", "USD-ROI": 1.41, "BTC-ROI": 0.99}, {"date": "21 Apr", "USD-ROI": 1.41, "BTC-ROI": 0.99}, {"date": "22 Apr", "USD-ROI": 1.43, "BTC-ROI": 0.98}, {"date": "23 Apr", "USD-ROI": 1.43, "BTC-ROI": 0.98}, {"date": "24 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.99}, {"date": "25 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.99}, {"date": "26 Apr", "USD-ROI": 1.39, "BTC-ROI": 0.99}, {"date": "27 Apr", "USD-ROI": 1.39, "BTC-ROI": 1.0}, {"date": "28 Apr", "USD-ROI": 1.38, "BTC-ROI": 1.0}, {"date": "29 Apr", "USD-ROI": 1.4, "BTC-ROI": 0.99}, {"date": "30 Apr", "USD-ROI": 1.35, "BTC-ROI": 1.01}, {"date": "1 May", "USD-ROI": 1.32, "BTC-ROI": 1.03}, {"date": "2 May", "USD-ROI": 1.33, "BTC-ROI": 1.02}, {"date": "3 May", "USD-ROI": 1.39, "BTC-ROI": 1.0}, {"date": "4 May", "USD-ROI": 1.4, "BTC-ROI": 1.0}, {"date": "5 May", "USD-ROI": 1.41, "BTC-ROI": 1.0}, {"date": "6 May", "USD-ROI": 1.39, "BTC-ROI": 1.0}, {"date": "7 May", "USD-ROI": 1.38, "BTC-ROI": 1.01}, {"date": "8 May", "USD-ROI": 1.36, "BTC-ROI": 1.01}, {"date": "9 May", "USD-ROI": 1.39, "BTC-ROI": 1.0}, {"date": "10 May", "USD-ROI": 1.36, "BTC-ROI": 1.02}, {"date": "11 May", "USD-ROI": 1.36, "BTC-ROI": 1.02}, {"date": "12 May", "USD-ROI": 1.37, "BTC-ROI": 1.01}, {"date": "13 May", "USD-ROI": 1.39, "BTC-ROI": 1.01}, {"date": "14 May", "USD-ROI": 1.37, "BTC-ROI": 1.01}, {"date": "15 May", "USD-ROI": 1.44, "BTC-ROI": 0.99}, {"date": "16 May", "USD-ROI": 1.43, "BTC-ROI": 0.99}, {"date": "17 May", "USD-ROI": 1.45, "BTC-ROI": 0.99}, {"date": "18 May", "USD-ROI": 1.45, "BTC-ROI": 0.99}, {"date": "19 May", "USD-ROI": 1.44, "BTC-ROI": 0.99}, {"date": "20 May", "USD-ROI": 1.51, "BTC-ROI": 0.96}, {"date": "21 May", "USD-ROI": 1.5, "BTC-ROI": 0.97}, {"date": "22 May", "USD-ROI": 1.48, "BTC-ROI": 0.98}, {"date": "23 May", "USD-ROI": 1.47, "BTC-ROI": 0.98}, {"date": "24 May", "USD-ROI": 1.48, "BTC-ROI": 0.98}, {"date": "25 May", "USD-ROI": 1.49, "BTC-ROI": 0.98}, {"date": "26 May", "USD-ROI": 1.48, "BTC-ROI": 0.98}, {"date": "27 May", "USD-ROI": 1.49, "BTC-ROI": 0.98}, {"date": "28 May", "USD-ROI": 1.48, "BTC-ROI": 0.98}]
for i in range(140) :
    print(int((oldDate[i]["BTC-ROI"] *100 )  -100  ))

with open('data.json', 'r') as file:
    # Load the content of the file into a Python dictionary
    data = json.load(file)


class Command(BaseCommand):
    def handle(self, *args, **options):
        try:
            strategy=Strategy.objects.all()[0]

            i = 0
            for history in data:
                ETHROI =(100* (oldDate[i]["USD-ROI"] *27300.0  / history["close"] )/ 11.64 ) -100
                BTCROI= int((oldDate[i]["BTC-ROI"] *100 )  -100  )
                USDROI =int((oldDate[i]["USD-ROI"] *100 )  -100  )
                History.objects.create(
                    ethROI=ETHROI, date=history["date"], btcROI=BTCROI, usdROI=USDROI, strategy=strategy)
                i += 1
            pass

        except Exception as e:
            print(e)
        print("OK STRATEGT script")
